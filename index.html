<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Farm Management Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header>
    <h1>Farm Management Dashboard</h1>
    <nav>
      <button id="dashboardBtn">Dashboard</button>
      <button id="salesFormBtn">Sales Entry</button>
      <button id="agingReportBtn">Aging Report</button>
      <button id="customersBtn">Customers</button>
      <button id="exportBackupBtn">Export Backup</button>
    </nav>
  </header>

  <main id="mainContent">
    <section id="salesFormSection" class="panel">
      <h2>Sales Entry Form</h2>
      <form id="salesForm">
        <label>Date: <input type="date" id="date" required></label>
        <label>Farm Name: <input type="text" id="farmName" required></label>
        <label>Vehicle No: <input type="text" id="vehicleNo" required></label>
        <label>Crate No: <input type="number" id="crateNo" required></label>
        <label>Total Birds: <input type="number" id="totalBirds" required></label>
        <label>Kanta Weight (kg): <input type="number" id="kantaWeight" step="0.01" required></label>
        <label>Katoti Mode:
          <select id="katotiMode">
            <option value="0.50">0.50</option>
            <option value="0.75">0.75</option>
            <option value="manual">Manual</option>
          </select>
        </label>
        <label>Manual Katoti (if manual selected): <input type="number" id="manualKatoti" step="0.01"></label>
        <label>Rate (Rs/kg): <input type="number" id="rate" step="0.01" required></label>
        <button type="submit">Save Sale</button>
      </form>

      <div id="calcResults">
        <p>Katoti: <span id="katotiVal">0</span> kg</p>
        <p>Net Weight: <span id="netWeightVal">0</span> kg</p>
        <p>Average Weight: <span id="avgWeightVal">0</span> kg/bird</p>
        <p>Total: Rs <span id="totalVal">0</span></p>
      </div>
    </section>

    <section id="agingReportSection" class="panel hidden">
      <h2>Aging Report</h2>
      <label>Search Customer: <input type="text" id="searchCustomer"></label>
      <button id="generateReportBtn">Generate Report</button>
      <table id="agingTable">
        <thead>
          <tr><th>Customer</th><th>Invoice</th><th>Total</th><th>Paid</th><th>Balance</th><th>Days Due</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section id="customersSection" class="panel hidden">
      <h2>Customers & Accounts</h2>
      <button id="addCustomerBtn">Add Customer</button>
      <div id="customersList"></div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
